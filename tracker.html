<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google AdSense verification -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6511293796177424"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SlimEasy - Track your food intake, nutrition, and plan your meals for effective weight management">
    <meta name="theme-color" content="#4CAF50">
    <title>SlimEasy - Food Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/brands.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Favicon -->
    <link rel="icon" href="slimeasylogo.jpg" type="image/jpeg">
    <link rel="apple-touch-icon" href="slimeasylogo.jpg">
    <!-- Preload critical assets -->
    <link rel="preload" href="theme.js" as="script">
    <link rel="preload" href="utils.js" as="script">
    <link rel="preload" href="tracker.js" as="script">
    <link rel="preload" href="slimeasylogo.jpg" as="image">
    <link rel="stylesheet" href="footer.css">
</head>
<body>
    <!-- Main Navigation -->
    <nav class="main-nav">
        <div class="main-nav-container">
            <a href="index.html" class="main-nav-logo">
                <img src="slimeasylogo.jpg" alt="SlimEasy">
                <span>SlimEasy</span>
            </a>
            <button class="menu-toggle" id="menuToggle" aria-label="Toggle navigation menu" onclick="toggleMainMobileMenu(); return false;">
                <i class="fas fa-bars"></i>
            </button>
            <div class="main-nav-links" id="mainNavLinks">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-user"></i> Profile
                </a>
                <a href="dashboard.html" class="nav-link">
                    <i class="fas fa-chart-line"></i> Dashboard
                </a>
                <a href="tracker.html" class="nav-link active">
                    <i class="fas fa-utensils"></i> Food Tracker
                </a>
                <a href="exercise.html" class="nav-link">
                    <i class="fas fa-running"></i> Exercise
                </a>
                <a href="calendar.html" class="nav-link">
                    <i class="fas fa-calendar-alt"></i> Calendar
                </a>
                <a href="wearable-settings.html" class="nav-link">
                    <i class="fas fa-sync"></i> Wearables
                </a>
                <a href="community.html" class="nav-link">
                    <i class="fas fa-users"></i> Community
                </a>
                <a href="contact.html" class="nav-link">
                    <i class="fas fa-envelope"></i> Contact Us
                </a>
            </div>
        </div>
    </nav>

    <div class="container">
        <h1>Food Tracker</h1>
        <p id="welcomeMessage"></p>
        
        <!-- Streak Display -->
        <div class="streak-display">
            <div class="streak-counter">
                <i class="fas fa-calendar-check streak-icon"></i>
                <div>
                    <div>Current Streak</div>
                    <div class="streak-value" id="currentStreak">0 days</div>
                </div>
            </div>
            <div class="streak-counter">
                <i class="fas fa-trophy streak-icon"></i>
                <div>
                    <div>Longest Streak</div>
                    <div class="streak-value" id="longestStreak">0 days</div>
                </div>
            </div>
            <div class="streak-counter">
                <i class="fas fa-star streak-icon"></i>
                <div>
                    <div>Points</div>
                    <div class="streak-value" id="achievementPoints">0</div>
                </div>
            </div>
        </div>
        
        <!-- Main Tracker Tabs -->
        <div class="tab-bar main-tabs">
            <button type="button" class="tab-button active" data-tab="summary">
                <i class="fas fa-chart-pie"></i> Summary
            </button>
            <button type="button" class="tab-button" data-tab="add-food">
                <i class="fas fa-hamburger"></i> Add Food
            </button>
            <button type="button" class="tab-button" data-tab="achievements">
                <i class="fas fa-medal"></i> Achievements
            </button>
        </div>

        <!-- Summary Tab -->
        <section id="summary" class="tab-content">
            <div class="card">
                <h2><i class="fas fa-chart-line"></i> Your Plan Summary</h2>
                <div class="connected-device-data">
                    <h3><i class="fas fa-sync"></i> Activity from Connected Devices</h3>
                    <div id="wearableTrackingWidget"></div>
                    <div class="device-actions">
                        <a href="wearable-settings.html" class="action-button">
                            <i class="fas fa-cog"></i> Manage Devices
                        </a>
                    </div>
                </div>
                <div class="summary-cards">
                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="summary-content">
                            <h3>BMR</h3>
                            <p id="bmr">--</p>
                            <p id="bmrUnits" class="units">kcal/day</p>
                            <span class="info">?
                                <span class="tooltip">Basal Metabolic Rate (BMR) is the number of calories your body burns at rest to keep you alive—like breathing and keeping your heart beating. It's your baseline energy need!</span>
                            </span>
                        </div>
                    </div>
                    
                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="summary-content">
                            <h3>TDEE</h3>
                            <p id="tdee">--</p>
                            <p id="tdeeUnits" class="units">kcal/day</p>
                            <span class="info">?
                                <span class="tooltip">Total Daily Energy Expenditure (TDEE) is your BMR plus the calories you burn moving around and exercising. It's how much energy you use in a day!</span>
                            </span>
                        </div>
                    </div>
                    
                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-minus-circle"></i>
                        </div>
                        <div class="summary-content">
                            <h3>Daily Deficit</h3>
                            <p id="dailyDeficit">--</p>
                            <p id="deficitUnits" class="units">kcal/day</p>
                        </div>
                    </div>
                    
                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <div class="summary-content">
                            <h3>Daily Goal</h3>
                            <p id="dailyGoal">--</p>
                            <p id="goalUnits" class="units">kcal/day</p>
                        </div>
                    </div>
                </div>
                
                <p class="note"><i class="fas fa-info-circle"></i> Note: A deficit over 500 kcal (2092 kJ) is not recommended for long-term weight loss.</p>
            </div>
            
            <!-- Water Tracking -->
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-tint"></i>
                    <h3 class="card-title">Water Intake Tracker</h3>
                </div>
                <div class="card-body">
                    <p>Track your daily water intake to stay hydrated (goal: 8 glasses per day)</p>
                    <div class="water-tracker">
                        <div id="waterGlasses"></div>
                        <div class="water-controls">
                            <button class="water-btn" id="addWater">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="water-btn" id="removeWater">
                                <i class="fas fa-minus"></i>
                            </button>
                        </div>
                    </div>
                    <div class="progress-container water-progress-container">
                        <div class="progress-bar progress-bar-water" id="waterProgress" style="width: 0%"></div>
                    </div>
                    <p id="waterStatus">0/8 glasses</p>
                    
                    <!-- Hydration reminder toggle -->
                    <div class="reminder-toggle">
                        <div class="toggle-switch">
                            <input type="checkbox" id="enableReminders" />
                            <label for="enableReminders" class="toggle-label"></label>
                        </div>
                        <div class="reminder-text">
                            <span>Enable hydration reminders</span>
                            <select id="reminderInterval" class="reminder-interval">
                                <option value="60">Every 1 hour</option>
                                <option value="120" selected>Every 2 hours</option>
                                <option value="180">Every 3 hours</option>
                                <option value="240">Every 4 hours</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button id="goToAddFood" class="action-button">
                    <i class="fas fa-plus-circle"></i> Add Food
                </button>
                <button onclick="window.location.href='scanner.html'" class="action-button">
                    <i class="fas fa-barcode"></i> Scan Barcode
                </button>
                <button id="goToExercise" class="action-button">
                    <i class="fas fa-running"></i> Add Exercise
                </button>
            </div>
            
            <!-- Daily Tip -->
            <div class="daily-tip">
                <h3><i class="fas fa-lightbulb"></i> Daily Tip</h3>
                <p id="dailyTip">Stay hydrated! Drinking water before meals can help you feel fuller and eat less.</p>
            </div>
        </section>

        <!-- Add Food Tab -->
        <section id="add-food" class="tab-content" style="display: none;">
            <div class="food-entry-tabs">
                <button type="button" class="food-tab active" data-tab="database-food">
                    <i class="fas fa-database"></i> Search Foods
                </button>
                <button type="button" class="food-tab" data-tab="manual-entry">
                    <i class="fas fa-edit"></i> Add Custom
                </button>
                <button type="button" class="food-tab" data-tab="my-meals">
                    <i class="fas fa-star"></i> My Favorites
                </button>
            </div>
            
            <div class="card food-entry-card">
                
                <!-- Database Food Tab -->
                <div id="database-food" class="sub-tab-content">
                    <div class="search-box">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" id="ingredientSearch" placeholder="Search foods in database...">
                        <div class="search-info">🌐 = Food from online database</div>
                    </div>
                    
                    <form id="mealForm" class="card-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="dbMealDate"><i class="fas fa-calendar-day"></i> Date</label>
                                <input type="date" id="dbMealDate">
                            </div>
                            <div class="form-group">
                                <label for="dbMealType"><i class="fas fa-clock"></i> Meal Type</label>
                                <select id="dbMealType">
                                    <option value="breakfast">Breakfast</option>
                                    <option value="lunch">Lunch</option>
                                    <option value="dinner">Dinner</option>
                                    <option value="snack">Snack</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="ingredient"><i class="fas fa-carrot"></i> Food Item</label>
                            <select id="ingredient"></select>
                            <div class="button-group">
                                <button type="button" id="viewNutritionDetails" class="nutrition-button">
                                    <i class="fas fa-info-circle"></i> View Complete Nutrition
                                </button>
                                <button type="button" id="saveToFavorites" class="favorite-button">
                                    <i class="fas fa-heart"></i> Save to Favorites
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ingredientQty"><i class="fas fa-balance-scale"></i> Quantity</label>
                                <input type="number" id="ingredientQty" min="1" value="1">
                            </div>
                            <div class="form-group">
                                <label for="ingredientUnit"><i class="fas fa-weight"></i> Unit</label>
                                <select id="ingredientUnit">
                                    <option value="unit">serving</option>
                                    <option value="g">grams</option>
                                    <option value="cup">cups</option>
                                    <option value="oz">oz</option>
                                    <option value="tbsp">tbsp</option>
                                    <option value="tsp">tsp</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="nutrient-summary">
                            <div class="nutrient-preview">
                                <span class="calories-preview"><span id="nutrientCalories">0</span> kcal</span>
                                <button type="button" id="viewNutritionBtn" class="view-nutrition-btn">
                                    <i class="fas fa-chart-pie"></i> View Nutrition
                                </button>
                            </div>
                            
                            <div id="nutrientDetailsPopup" class="nutrient-details-popup" style="display:none;">
                                <div class="popup-header">
                                    <h4><i class="fas fa-chart-pie"></i> Nutrition Facts <span id="perServingText">(per serving)</span></h4>
                                    <button type="button" class="close-popup-btn" id="closeNutritionBtn">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div id="nutrientInfo" class="nutrient-info">
                                    <div class="nutrient-item"><span>Calories:</span> <span id="nutrientCaloriesPopup">0</span> kcal</div>
                                    <div class="nutrient-item"><span>Protein:</span> <span id="nutrientProtein">0</span>g</div>
                                    <div class="nutrient-item"><span>Carbs:</span> <span id="nutrientCarbs">0</span>g</div>
                                    <div class="nutrient-item"><span>Fat:</span> <span id="nutrientFat">0</span>g</div>
                                    <div class="nutrient-item"><span>Fiber:</span> <span id="nutrientFiber">0</span>g</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="mealNotes"><i class="fas fa-sticky-note"></i> Notes (optional)</label>
                            <textarea id="mealNotes" placeholder="Add any preparation details, ingredients, or other notes..."></textarea>
                        </div>
                        
                        <button type="button" id="addIngredient" class="action-button"><i class="fas fa-calendar-plus"></i> Add to Calendar</button>
                    </form>
                </div>
                
                <!-- Manual Entry Tab -->
                <div id="manual-entry" class="sub-tab-content" style="display: none;">
                    <form id="customFoodForm" class="card-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="customMealDate"><i class="fas fa-calendar-day"></i> Date</label>
                                <input type="date" id="customMealDate">
                            </div>
                            <div class="form-group">
                                <label for="customMealType"><i class="fas fa-clock"></i> Meal Type</label>
                                <select id="customMealType">
                                    <option value="breakfast">Breakfast</option>
                                    <option value="lunch">Lunch</option>
                                    <option value="dinner">Dinner</option>
                                    <option value="snack">Snack</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="customFoodName"><i class="fas fa-apple-alt"></i> Food Name</label>
                            <input type="text" id="customFoodName" required placeholder="e.g., Grilled Chicken Breast">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="customCalories"><i class="fas fa-fire"></i> Calories (kcal)</label>
                                <input type="number" id="customCalories" min="0" required placeholder="e.g., 200">
                            </div>
                            <div class="form-group">
                                <label for="customQuantity"><i class="fas fa-list-ol"></i> Quantity</label>
                                <input type="number" id="customQuantity" min="1" value="1" placeholder="e.g., 1">
                            </div>
                        </div>
                        
                        <div class="macro-inputs">
                            <div class="macro-input">
                                <label for="customProtein"><i class="fas fa-drumstick-bite"></i> Protein (g)</label>
                                <input type="number" id="customProtein" min="0" step="0.1" value="0">
                            </div>
                            
                            <div class="macro-input">
                                <label for="customCarbs"><i class="fas fa-bread-slice"></i> Carbs (g)</label>
                                <input type="number" id="customCarbs" min="0" step="0.1" value="0">
                            </div>
                            
                            <div class="macro-input">
                                <label for="customFat"><i class="fas fa-cheese"></i> Fat (g)</label>
                                <input type="number" id="customFat" min="0" step="0.1" value="0">
                            </div>
                        </div>
                        
                        <button type="button" id="calculateMacrosButton" class="helper-button">
                            <i class="fas fa-calculator"></i> Auto-Calculate Macros
                        </button>
                        
                        <div class="form-group">
                            <label for="customMealNotes"><i class="fas fa-sticky-note"></i> Notes (optional)</label>
                            <textarea id="customMealNotes" placeholder="Add any preparation details, ingredients, or other notes..."></textarea>
                        </div>
                        
                        <div class="button-group">
                            <button type="button" id="addCustomFood" class="action-button"><i class="fas fa-calendar-plus"></i> Add to Calendar</button>
                            <button type="button" id="saveCustomToFavorites" class="action-button favorite-button"><i class="fas fa-heart"></i> Save to Favorites</button>
                        </div>
                    </form>
                </div>
                
                <!-- My Saved Meals Tab -->
                <div id="my-meals" class="sub-tab-content" style="display: none;">
                    <div class="saved-meals-actions">
                        <button type="button" id="saveCurrentMeal" class="action-button">
                            <i class="fas fa-save"></i> Save Current Food as Favorite
                        </button>
                        <button type="button" id="manageSavedMeals" class="action-button secondary">
                            <i class="fas fa-cog"></i> Manage Saved Foods
                        </button>
                    </div>
                    
                    <div class="quick-add-section">
                        <h3><i class="fas fa-bolt"></i> Quick Add Favorites</h3>
                        <div class="quick-add-filters">
                            <div class="filter-group">
                                <label>Filter by:</label>
                                <button type="button" class="filter-btn active" data-filter="all">All</button>
                                <button type="button" class="filter-btn" data-filter="meals">Meals</button>
                                <button type="button" class="filter-btn" data-filter="ingredients">Ingredients</button>
                            </div>
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" id="savedFoodSearch" placeholder="Search saved foods...">
                            </div>
                        </div>
                        
                        <p class="empty-state" id="noSavedMeals">You don't have any saved foods yet. Add individual foods or complete meals to your favorites!</p>
                        <div id="savedFoodsList" class="saved-foods-grid"></div>
                    </div>
                </div>
                
                <!-- Nutrition Details Modal -->
                <div id="nutritionModal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2 id="modalFoodName">Food Nutrition Details</h2>
                            <span class="close">&times;</span>
                        </div>
                        <div class="modal-body">
                            <div class="nutrition-label">
                                <h3>Nutrition Facts</h3>
                                <div id="servingInfo">Serving size: 100g</div>
                                <div class="nutrition-divider thick"></div>
                                <div class="calories-row">
                                    <div class="label">Calories</div>
                                    <div id="modalCalories" class="value">100</div>
                                </div>
                                <div class="nutrition-divider thick"></div>
                                <div class="nutrient-row">
                                    <div class="label">Total Fat</div>
                                    <div id="modalFat" class="value">0g</div>
                                </div>
                                <div class="nutrition-divider"></div>
                                <div class="nutrient-row sub">
                                    <div class="label">Saturated Fat</div>
                                    <div id="modalSatFat" class="value">0g</div>
                                </div>
                                <div class="nutrition-divider"></div>
                                <div class="nutrient-row sub">
                                    <div class="label">Trans Fat</div>
                                    <div id="modalTransFat" class="value">0g</div>
                                </div>
                                <div class="nutrition-divider"></div>
                                <div class="nutrient-row">
                                    <div class="label">Cholesterol</div>
                                    <div id="modalCholesterol" class="value">0mg</div>
                                </div>
                                <div class="nutrition-divider"></div>
                                <div class="nutrient-row">
                                    <div class="label">Sodium</div>
                                    <div id="modalSodium" class="value">0mg</div>
                                </div>
                                <div class="nutrition-divider"></div>
                                <div class="nutrient-row">
                                    <div class="label">Total Carbohydrate</div>
                                    <div id="modalCarbs" class="value">0g</div>
                                </div>
                                <div class="nutrition-divider"></div>
                                <div class="nutrient-row sub">
                                    <div class="label">Dietary Fiber</div>
                                    <div id="modalFiber" class="value">0g</div>
                                </div>
                                <div class="nutrition-divider"></div>
                                <div class="nutrient-row sub">
                                    <div class="label">Total Sugars</div>
                                    <div id="modalSugars" class="value">0g</div>
                                </div>
                                <div class="nutrition-divider"></div>
                                <div class="nutrient-row">
                                    <div class="label">Protein</div>
                                    <div id="modalProtein" class="value">0g</div>
                                </div>
                                <div class="nutrition-divider thick"></div>
                                <div class="nutrient-row">
                                    <div class="label">Vitamin D</div>
                                    <div id="modalVitaminD" class="value">0mcg</div>
                                </div>
                                <div class="nutrition-divider"></div>
                                <div class="nutrient-row">
                                    <div class="label">Calcium</div>
                                    <div id="modalCalcium" class="value">0mg</div>
                                </div>
                                <div class="nutrition-divider"></div>
                                <div class="nutrient-row">
                                    <div class="label">Iron</div>
                                    <div id="modalIron" class="value">0mg</div>
                                </div>
                                <div class="nutrition-divider"></div>
                                <div class="nutrient-row">
                                    <div class="label">Potassium</div>
                                    <div id="modalPotassium" class="value">0mg</div>
                                </div>
                            </div>
                            <div class="modal-source" id="modalSource">Source: Local Database</div>
                        </div>
                        <div class="modal-footer">
                            <button id="closeNutritionModal" class="action-button">Close</button>
                            <button id="addFromModal" class="action-button primary">Add to Meal</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Current Meal Builder -->
            <div class="card">
                <h3><i class="fas fa-list"></i> Current Foods</h3>
                <ul id="mealIngredients" class="ingredients-list"></ul>
                <div class="meal-total">
                    <p>Total: <span id="mealCalories">0</span> kcal (<span id="mealKj">0</span> kJ)</p>
                </div>
                
                <div class="meal-actions">
                    <button type="button" id="removeIngredient" class="action-button remove"><i class="fas fa-minus"></i> Remove Last Item</button>
                    <button type="button" id="clearMeal" class="action-button remove"><i class="fas fa-trash-alt"></i> Clear All</button>
                </div>
                
                <form id="saveMealForm" class="card-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="mealName"><i class="fas fa-tag"></i> Meal Name</label>
                            <input type="text" id="mealName" value="Food Item" placeholder="Enter meal name">
                        </div>
                        <div class="form-group">
                            <label for="saveMealDate"><i class="fas fa-calendar-day"></i> Date</label>
                            <input type="date" id="saveMealDate">
                        </div>
                        <div class="form-group">
                            <label for="mealType"><i class="fas fa-clock"></i> Meal Type</label>
                            <select id="mealType">
                                <option value="breakfast">Breakfast</option>
                                <option value="lunch">Lunch</option>
                                <option value="dinner">Dinner</option>
                                <option value="snack">Snack</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="mealNotes"><i class="fas fa-sticky-note"></i> Notes (optional)</label>
                        <textarea id="mealNotes" placeholder="Add any notes, ingredients, or meal details here..."></textarea>
                    </div>
                    
                    <div class="form-row save-meal-buttons">
                        <button type="submit" class="action-button primary">
                            <i class="fas fa-calendar-plus"></i> Add to Calendar
                        </button>
                        <a href="calendar.html" class="action-button secondary">
                            <i class="fas fa-calendar-alt"></i> View Calendar
                        </a>
                    </div>
                </form>
            </div>
        </section>

        <!-- Calendar Redirect Notice -->
        <section id="calendar-notice" class="tab-content" style="display: none;">
            <div class="card">
                <h2><i class="fas fa-calendar-alt"></i> Calendar View</h2>
                
                <div class="notice-content">
                    <p>Food entries are now saved directly to the Calendar for easier tracking and management.</p>
                    
                    <div class="calendar-preview">
                        <img src="slimeasylogo.jpg" alt="Calendar Preview" class="calendar-icon">
                        <div class="calendar-info">
                            <h3>New Streamlined Process</h3>
                            <ul>
                                <li>Add foods in the Food Tracker</li>
                                <li>View all entries in the Calendar</li>
                                <li>Track progress over time in one place</li>
                                <li>Export your data including all details</li>
                            </ul>
                        </div>
                    </div>
                    
                    <a href="calendar.html" class="action-button">
                        <i class="fas fa-calendar-alt"></i> Go to Calendar
                    </a>
                </div>
            </div>
        </section>

        <!-- Achievements Tab -->
        <section id="achievements" class="tab-content" style="display: none;">
            <div class="card">
                <h2><i class="fas fa-medal"></i> Your Achievements</h2>
                <div id="achievementsContainer" class="achievements-grid">
                    <!-- Achievements will be rendered here -->
                </div>
            </div>
        </section>
    </div>
    
    <!-- Footer with Privacy Policy -->
    <footer class="app-footer">
        <div class="footer-content">
            <p>&copy; 2025 SlimEasy | <a href="privacy-policy.html" class="privacy-link">Privacy Policy</a></p>
        </div>
    </footer>
    
    <style>
        /* Tab Navigation */
        .tab-bar {
            display: flex;
            gap: 5px;
            margin-bottom: 25px;
            background-color: var(--background-main);
            padding: 5px;
            border-radius: var(--input-border-radius);
        }
        
        .main-tabs {
            margin-top: 20px;
        }
        
        .tab-button {
            flex: 1;
            background: none;
            border: none;
            padding: 12px 15px;
            cursor: pointer;
            font-weight: 500;
            border-radius: var(--input-border-radius);
            color: var(--text-secondary);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .tab-button.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .tab-button:hover:not(.active) {
            background-color: rgba(0,0,0,0.05);
        }
        
        .tab-content {
            animation: fadeIn 0.3s ease;
        }
        
        .sub-tabs {
            margin-top: 0;
            margin-bottom: 20px;
        }
        
        /* Cards for content sections */
        .card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            padding: 25px;
            margin-bottom: 25px;
        }
        
        .card h2 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 20px;
            color: var(--text-primary);
        }
        
        .card h3 {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 0;
            font-size: 18px;
            color: var(--text-primary);
        }
        
        /* Form styling */
        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            flex: 1;
            min-width: 250px;
        }
        
        .form-group label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            color: var(--text-primary);
        }
        
        .form-group input, 
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--divider-color);
            border-radius: var(--input-border-radius);
            background-color: var(--background-main);
            color: var(--text-primary);
            font-family: inherit;
            font-size: 16px;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        /* Search box */
        .search-box {
            position: relative;
            margin-bottom: 20px;
        }
        
        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }
        
        .search-box input {
            width: 100%;
            padding: 12px 12px 12px 40px;
            border: 1px solid var(--divider-color);
            border-radius: var(--input-border-radius);
            background-color: var(--background-main);
            color: var(--text-primary);
            font-size: 16px;
        }
        
        .search-info {
            margin-top: 5px;
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        /* Meal ingredients list */
        .ingredients-list {
            list-style: none;
            padding: 0;
            margin: 0 0 20px 0;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .ingredients-list li {
            padding: 10px 15px;
            border-bottom: 1px solid var(--divider-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .ingredients-list li:last-child {
            border-bottom: none;
        }
        
        .meal-total {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
            padding: 10px;
            background-color: var(--primary-light);
            border-radius: var(--input-border-radius);
            text-align: center;
        }
        
        /* Button styling */
        .action-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: var(--input-border-radius);
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .action-button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .action-button.secondary {
            background-color: var(--background-main);
            color: var(--text-primary);
            border: 1px solid var(--divider-color);
        }
        
        .action-button.secondary:hover {
            background-color: #f5f5f5;
        }
        
        .action-button.remove {
            background-color: rgba(244, 67, 54, 0.1);
            color: #F44336;
            border: 1px solid rgba(244, 67, 54, 0.2);
        }
        
        .action-button.remove:hover {
            background-color: rgba(244, 67, 54, 0.2);
        }
        
        .action-buttons, 
        .meal-actions,
        .save-meal-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .action-buttons .action-button,
        .meal-actions .action-button,
        .save-meal-buttons .action-button {
            flex: 1;
        }
        
        .helper-button {
            background-color: #f5f5f5;
            color: var(--text-primary);
            border: 1px solid var(--divider-color);
            padding: 10px;
            border-radius: var(--input-border-radius);
            margin-bottom: 20px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.2s ease;
        }
        
        .helper-button:hover {
            background-color: #e0e0e0;
        }
        
        /* Nutrient info - Simplified */
        .nutrient-summary {
            margin-bottom: 20px;
            position: relative;
        }
        
        .nutrient-preview {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--background-main);
            border: 1px solid var(--divider-color);
            border-radius: var(--input-border-radius);
            padding: 12px 15px;
        }
        
        .calories-preview {
            font-size: 18px;
            font-weight: 500;
            color: var(--primary-color);
        }
        
        .view-nutrition-btn {
            background: none;
            border: none;
            padding: 6px 12px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            border-radius: var(--input-border-radius);
            transition: all 0.2s ease;
        }
        
        .view-nutrition-btn:hover {
            background-color: rgba(0,0,0,0.05);
            color: var(--text-primary);
        }
        
        .nutrient-details-popup {
            position: absolute;
            right: 0;
            top: 100%;
            width: 300px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 100;
            margin-top: 5px;
            border: 1px solid var(--divider-color);
        }
        
        .popup-header {
            padding: 12px 15px;
            border-bottom: 1px solid var(--divider-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .popup-header h4 {
            margin: 0;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .close-popup-btn {
            background: none;
            border: none;
            font-size: 14px;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            width: 24px;
            height: 24px;
        }
        
        .close-popup-btn:hover {
            background-color: rgba(0,0,0,0.05);
            color: var(--text-primary);
        }
        
        .nutrient-info {
            padding: 15px;
        }
        
        .nutrient-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px dashed var(--divider-color);
        }
        
        .nutrient-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        
        .nutrient-item span:first-child {
            font-weight: 500;
            color: var(--text-secondary);
        }
        
        /* Macro input styling */
        .macro-inputs {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .macro-input label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        
        .macro-input input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--divider-color);
            border-radius: var(--input-border-radius);
            background-color: var(--background-main);
            color: var(--text-primary);
        }
        
        .serving-size-container {
            display: flex;
            gap: 10px;
        }
        
        .serving-size-container input {
            flex: 3;
        }
        
        .serving-size-container select {
            flex: 2;
        }
        
        /* Weekly Plan Styling */
        .week-navigator {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            gap: 10px;
        }
        
        .week-selector {
            flex-grow: 1;
            position: relative;
        }
        
        .week-nav-btn {
            background-color: var(--background-main);
            border: 1px solid var(--divider-color);
            color: var(--text-primary);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .week-nav-btn:hover {
            background-color: var(--primary-light);
            color: var(--primary-dark);
        }
        
        .date-picker {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--divider-color);
            border-radius: var(--input-border-radius);
            background-color: var(--background-main);
            color: var(--text-primary);
            font-family: inherit;
            font-size: 16px;
            cursor: pointer;
        }
        
        .week-label {
            position: absolute;
            top: -20px;
            left: 0;
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .week-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        /* Weekly Planner Redesign */
        .weekly-planner {
            margin-bottom: 30px;
        }
        
        .day-columns {
            display: flex;
            flex-direction: column;
            border-radius: var(--input-border-radius);
            overflow: hidden;
            border: 1px solid var(--divider-color);
        }
        
        .day-column-headers {
            display: grid;
            grid-template-columns: 100px repeat(5, 1fr) 120px;
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
        }
        
        .day-header, .meal-header {
            padding: 12px;
            text-align: center;
            border-right: 1px solid rgba(255,255,255,0.2);
        }
        
        .day-column-scrollable {
            max-height: 600px;
            overflow-y: auto;
        }
        
        .weekly-plan-content {
            display: flex;
            flex-direction: column;
        }
        
        .day-row {
            display: grid;
            grid-template-columns: 100px repeat(5, 1fr) 120px;
            border-bottom: 1px solid var(--divider-color);
        }
        
        .day-row:nth-child(odd) {
            background-color: rgba(0,0,0,0.02);
        }
        
        .day-row:last-child {
            border-bottom: none;
        }
        
        .day-cell {
            padding: 15px;
            border-right: 1px solid var(--divider-color);
            position: relative;
        }
        
        .day-cell:last-child {
            border-right: none;
            font-weight: 600;
        }
        
        .day-name {
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .day-date {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 4px;
        }
        
        .day-cell-current {
            background-color: rgba(var(--primary-color-rgb), 0.1);
        }
        
        .meal-item {
            background-color: var(--card-bg);
            padding: 8px;
            margin-bottom: 5px;
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            color: var(--text-primary);
            position: relative;
        }
        
        .meal-item:last-child {
            margin-bottom: 0;
        }
        
        .meal-item .meal-name {
            font-weight: 500;
            margin-bottom: 3px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .meal-item .meal-calories {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .meal-item .remove-meal {
            position: absolute;
            top: 5px;
            right: 5px;
            color: var(--text-secondary);
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.2s;
        }
        
        .meal-item:hover .remove-meal {
            opacity: 1;
        }
        
        .nutrition-cell {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        
        .nutrition-number {
            font-weight: 600;
            font-size: 16px;
        }
        
        .nutrition-label {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .day-highlight {
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background-color: var(--primary-color);
        }
        
        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .tab-button {
                font-size: 14px;
                padding: 10px;
            }
            
            .tab-button i {
                margin-right: 5px;
            }
            
            .macro-inputs {
                grid-template-columns: 1fr;
            }
            
            .day-columns {
                overflow-x: auto;
            }
            
            .day-column-headers,
            .day-row {
                min-width: 760px;
            }
        }
        
        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Textarea styling */
        textarea {
            width: 100%;
            min-height: 80px;
            padding: 12px;
            border: 1px solid var(--divider-color);
            border-radius: var(--input-border-radius);
            background-color: var(--background-main);
            color: var(--text-primary);
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
        }
        
        /* Saved Foods Styling */
        .saved-meals-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .quick-add-section {
            margin-top: 25px;
        }
        
        .quick-add-section h3 {
            margin-top: 0;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .quick-add-filters {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .filter-group {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            background-color: var(--background-main);
            border: 1px solid var(--divider-color);
            padding: 6px 12px;
            border-radius: var(--input-border-radius);
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .filter-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .saved-foods-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .saved-food-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            border: 1px solid var(--divider-color);
            padding: 15px;
            transition: all 0.2s ease;
            cursor: pointer;
            position: relative;
        }
        
        .saved-food-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            border-color: var(--primary-color);
        }
        
        .saved-food-type {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 10px;
            background-color: rgba(76, 175, 80, 0.1);
            color: var(--primary-color);
        }
        
        .saved-food-name {
            font-weight: 600;
            margin-bottom: 5px;
            padding-right: 50px;
        }
        
        .saved-food-calories {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .saved-food-macros {
            display: flex;
            gap: 10px;
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .saved-food-actions {
            margin-top: 10px;
            display: flex;
            justify-content: space-between;
        }
        
        .saved-food-btn {
            padding: 5px 10px;
            border: none;
            background-color: var(--primary-light);
            color: var(--primary-color);
            border-radius: var(--input-border-radius);
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .saved-food-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        .saved-food-btn.delete {
            background-color: rgba(244, 67, 54, 0.1);
            color: #F44336;
        }
        
        .saved-food-btn.delete:hover {
            background-color: #F44336;
            color: white;
        }
        
        textarea:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        /* Calendar notice */
        .notice-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            padding: 10px;
        }
        
        .calendar-preview {
            display: flex;
            align-items: center;
            background-color: var(--background-main);
            border-radius: var(--border-radius);
            padding: 20px;
            gap: 20px;
            width: 100%;
            margin: 10px 0;
        }
        
        .calendar-icon {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 50%;
        }
        
        .calendar-info {
            flex: 1;
        }
        
        .calendar-info h3 {
            margin-top: 0;
        }
        
        .calendar-info ul {
            padding-left: 20px;
        }
        
        .calendar-info li {
            margin-bottom: 8px;
        }
        /* Button group styling */
        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
            margin: 10px 0;
        }
        
        .nutrition-button, .favorite-button {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: none;
            border: none;
            padding: 5px 0;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
        }
        
        .nutrition-button {
            color: var(--primary-color);
        }
        
        .favorite-button {
            color: var(--accent-color, #FF6D00);
        }
        
        .nutrition-button:hover, .favorite-button:hover {
            opacity: 0.8;
            text-decoration: underline;
        }
        
        /* Empty state styling */
        .empty-state {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
            background-color: var(--background-light);
            border-radius: var(--border-radius);
            margin: 20px 0;
        }
        
        .empty-state h3 {
            margin-top: 0;
            color: var(--text-primary);
        }
        
        .empty-state ol, .empty-state ul {
            text-align: left;
            margin: 15px auto;
            max-width: 400px;
        }
        
        .empty-state li {
            margin-bottom: 10px;
        }
    </style>
    
    <script src="dark-mode-fix.js"></script>
    <script src="theme.js"></script>
    <script src="utils.js"></script>
    <script src="export-utils.js"></script>
    <script src="charts.js"></script>
    <script src="gamification.js"></script>
    <script src="tracker.js"></script>
    <script src="tracker-fixed.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize page (theme, menu, login check)
            initializePage();
        });
    </script>
</body>
</html>
